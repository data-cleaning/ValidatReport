!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(t,r,n){function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(n=(l=a.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l,a,s,c,u,d,f,p,v,h=n(1),y={},g=d3.scaleOrdinal().domain(["0","1","NA"]).range(["#FC8D59","#91CF60","#FFFFBF"]),b=d3.scaleOrdinal().domain([1,10]).range([.4,1]),m=d3.scaleOrdinal().domain([1,10]).range([.4,1]),w=d3.scaleOrdinal().domain([1,10]).range([.4,1]),O=function(){function t(e){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=h(y,e),"container"in this.options!=0)if("data"in this.options!=0)if("report"in this.options!=0)if("idcol"in this.options!=0){if(!d3.select(this.options.container).empty()){dc.config.defaultColors(d3.schemeAccent);var n=d3.select(this.options.container).append("div").classed("row",!0),o=n.append("div").classed("col-4",!0),i=n.append("div").classed("col-8",!0);o.append("div").classed("row",!0).append("div").classed("col",!0).attr("id","divEventCount").append("span").classed("filter-count",!0).text("selected out of <span class='total-count'></span> records.");C(o,"divChartValue","Events by value"),C(o,"divChartSeverity","Events by severity"),C(o,"divChartRule","Events by rule");for(var b,m=[],w=Object.keys(this.options.data[0]),O=0;O<w.length;O++)col=w[O],m.push({data:(b=col,b.replace(/\./g,"\\.")),name:col,title:col});return i.append("table").attr("id","tableData").classed("compact",!0).classed("cell-border",!0),v=$("#tableData").DataTable({data:this.options.data,columns:m,searching:!1,scrollY:"600px",scrollCollapse:!0,paging:!1,rowId:this.options.idcol}),this.eventCount=dc.dataCount("#divEventCount"),this.chartValue=dc.pieChart("#divChartValue"),this.chartSeverity=dc.rowChart("#divChartSeverity"),this.chartRule=dc.rowChart("#divChartRule"),d3.select("#divChartValue a").on("click",function(){return r.chartValue.filter(null).redrawGroup()}),d3.select("#divChartSeverity a").on("click",function(){return r.chartSeverity.filter(null).redrawGroup()}),d3.select("#divChartRule a").on("click",function(){return r.chartRule.filter(null).redrawGroup()}),p=crossfilter(this.options.report),idDim=p.dimension(function(e){return e.id}),l=p.dimension(function(e){return e.value}),a=p.dimension(function(e){return e.rule.severity}),s=p.dimension(function(e){return e.event.agent}),d=p.dimension(function(e){return e.event.actor}),ruleDim=p.dimension(function(e){return"id"in e.rule?e.rule.id:r._expressionShort(e.rule.source)}),c=l.group().reduceCount(),u=a.group().reduceCount(),agentCount=s.group().reduceCount(),d.group().reduceCount(),ruleCount=ruleDim.group().reduceCount(),f=p.groupAll(),this.eventCount.dimension(p).group(f).html({some:"<strong>%filter-count</strong> selected out of <strong>%total-count</strong> events | <a href='javascript:dc.filterAll(); dc.renderAll();'>Reset All</a>",all:"<strong>%filter-count</strong> selected out of <strong>%total-count</strong> events"}),this.chartValue.width(200).height(100).dimension(l).group(c).controlsUseVisibility(!0).innerRadius(0).label(function(e){return 0==e.key?"fails":1==e.key?"passes":"NA"}).title(function(e){return 0==e.key?"fails: "+e.value:1==e.key?"passes: "+e.value:"NA: "+e.value}).colors(function(e){return g(e)}),this.chartSeverity.width(200).height(100).dimension(a).group(u).controlsUseVisibility(!0).elasticX(!0).ordinalColors(["#3182bd"]).label(function(e){if(r.chartSeverity.hasFilter()&&!r.chartSeverity.hasFilter(e.key))return e.key+" (0%)";var t=e.key;return f.value()&&(t+=" ("+Math.floor(e.value/f.value()*100)+"%)"),t}).legend(dc.legend()),this.chartRule.width(400).height(500).dimension(ruleDim).group(ruleCount).controlsUseVisibility(!0).ordinalColors(["#3182bd"]).elasticX(!1).ordering(function(e){return e.key}),dc.renderAll(),p.onChange(function(e){"filtered"==e&&r._showFails()}),this._showFails(),this}console.log("container not found")}else console.log("idcol not set");else console.log("report not set");else console.log("data not set");else console.log("container not set");function C(e,t,r){var n=e.append("div").attr("id",t).append("div");return n.append("strong").text(r),n.append("a").classed("reset",!0).style("visibility","hidden").style("margin-left","5px").attr("href","#").text("reset"),n}}var r,n,O;return r=t,(n=[{key:"_expressionShort",value:function(e){return e.substr(0,160)}},{key:"_showFails",value:function(){$(v.cells().nodes()).css("background-color","");var t=new Map,r=new Map([["0",0],["1",0],["NA",0]]),n=!0,i=!1,l=void 0;try{for(var a,s=p.allFiltered()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value,u=!0,d=!1,f=void 0;try{for(var h,y=c.data.target[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){var O=h.value,C=O[2]+O[3],S=t.get(C);S||(t.set(C,{row:O[2],col:O[3],cnts:new Map([["0",0],["1",0],["NA",0]]),events:[]}),S=t.get(C)),S.cnts.set(c.value,S.cnts.get(c.value)+1),S.events.push(c),S.cnts.get(c.value)>r.get(c.value)&&r.set(c.value,S.cnts.get(c.value))}}catch(e){d=!0,f=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw f}}}}catch(e){i=!0,l=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw l}}console.log(r),b.domain([1,r.get("1")]),m.domain([1,r.get("0")]),w.domain([1,r.get("NA")]);var j=!0,A=!1,x=void 0;try{for(var k,P=t[Symbol.iterator]();!(j=(k=P.next()).done);j=!0){var E=o(k.value,2),F=E[0],_=E[1],D="#"+_.row,V=_.col+":name",M=v.cell(D,V),N=!1,R=!1,T=!0,G=!1,I=void 0;try{for(var U,X=_.events[Symbol.iterator]();!(T=(U=X.next()).done);T=!0){if(e=U.value,"0"==e.value){N=!0;break}"NA"==e.value&&(R=!0)}}catch(e){G=!0,I=e}finally{try{T||null==X.return||X.return()}finally{if(G)throw I}}var B=N?"0":R?"NA":"1",Y=d3.color(g(B)),q=_.cnts.get(B);Y.opacity="1"==B?b(q):"0"==B?m(q):w(q),$(M.node()).css("background-color",Y.toString()),console.log(F,B,q)}}catch(e){A=!0,x=e}finally{try{j||null==P.return||P.return()}finally{if(A)throw x}}}}])&&i(r.prototype,n),O&&i(r,O),t}();window.validationDashboard=O},function(e,t,r){"use strict";const n=r(2),o=Object.prototype.hasOwnProperty,i=Object.propertyIsEnumerable,l=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,s={concatArrays:!1},c=e=>{const t=[];for(const r in e)o.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(let n=0;n<r.length;n++)i.call(e,r[n])&&t.push(r[n])}return t};function u(e){return Array.isArray(e)?function(e){const t=e.slice(0,0);return c(e).forEach(r=>{l(t,r,u(e[r]))}),t}(e):n(e)?function(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return c(e).forEach(r=>{l(t,r,u(e[r]))}),t}(e):e}const d=(e,t,r,n)=>(r.forEach(r=>{r in e&&e[r]!==Object.getPrototypeOf(e)?l(e,r,p(e[r],t[r],n)):l(e,r,u(t[r]))}),e),f=(e,t,r)=>{let n=e.slice(0,0),i=0;return[e,t].forEach(t=>{const a=[];for(let r=0;r<t.length;r++)o.call(t,r)&&(a.push(String(r)),l(n,i++,t===e?t[r]:u(t[r])));n=d(n,t,c(t).filter(e=>-1===a.indexOf(e)),r)}),n};function p(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?f(e,t,r):n(t)&&n(e)?d(e,t,c(t),r):u(t)}e.exports=function(){const e=p(u(s),this!==a&&this||{},s);let t={foobar:{}};for(let r=0;r<arguments.length;r++){const o=arguments[r];if(void 0!==o){if(!n(o))throw new TypeError("`"+o+"` is not an Option Object");t=p(t,{foobar:o},e)}}return t.foobar}},function(e,t,r){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t;return"[object Object]"===n.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))}}]);