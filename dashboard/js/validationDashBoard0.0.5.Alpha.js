!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,r,n){function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var l,a=t[Symbol.iterator]();!(n=(l=a.next()).done)&&(r.push(l.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l,a,s,c,u,d,f,p,h,v=n(1),y={},b=d3.scaleOrdinal().domain(["0","1","NA"]).range(["#FC8D59","#91CF60","#FFFFBF"]),g=(d3.scaleOrdinal().domain([1,10]).range([.4,1]),d3.scaleOrdinal().domain([1,10]).range([.4,1])),m=(d3.scaleOrdinal().domain([1,10]).range([.4,1]),[]),w=!0,C=new Map,O=function(){function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=v(y,e),"container"in this.options!=0)if("data"in this.options!=0)if("report"in this.options!=0)if("idcol"in this.options!=0){if(!d3.select(this.options.container).empty()){dc.config.defaultColors(d3.schemeAccent);var n=d3.select(this.options.container).append("div").classed("row",!0),o=n.append("div").classed("col-4",!0),i=n.append("div").classed("col-8",!0);o.append("div").classed("row",!0).append("div").classed("col",!0).attr("id","divEventCount").append("span").classed("filter-count",!0).text("selected out of <span class='total-count'></span> records.");F(o,"divChartValue","Results"),F(o,"divChartSeverity","Severity"),F(o,"divChartRule","Rules");var g=!0,O=!1,x=void 0;try{for(var S,A=this.options.data[Symbol.iterator]();!(g=(S=A.next()).done);g=!0){var j=S.value;m.push(j[this.options.idcol])}}catch(t){O=!0,x=t}finally{try{g||null==A.return||A.return()}finally{if(O)throw x}}for(var k,_=[],P=Object.keys(this.options.data[0]),R=0;R<P.length;R++)col=P[R],_.push({data:(k=col,k.replace(/\./g,"\\.")),name:col,title:col});return i.append("table").attr("id","tableData").classed("compact",!0).classed("cell-border",!0),(h=$("#tableData").DataTable({data:this.options.data,columns:_,searching:!1,scrollY:"600px",scrollCollapse:!0,paging:!1,rowId:this.options.idcol,info:!1,select:{style:"single",items:"cell",info:!1},dom:"Bfrtip",stateSave:!0,buttons:[{extend:"collection",autoClose:!0,text:"Row visibility",buttons:[{text:"All rows",action:function(t,e,n,o){w=!0,r._updateTable()}},{text:"Colored rows",action:function(t,e,n,o){w=!1,r._updateTable()}}]},"colvis"]})).on("mouseenter","tbody td",function(){0==$(this).hasClass("selected")&&($(this).css("padding",3),$(this).css("border","1px solid #888"))}),h.on("mouseleave","tbody td",function(){0==$(this).hasClass("selected")&&D($(this))}),h.on("select",function(t,e,r,n){var o=h.cell(n);$(o.node()).css("padding",1),$(o.node()).css("border","3px dashed black");var i=[];if(o.node().cellId){var l=C.get(o.node().cellId).events,a=!0,s=!1,c=void 0;try{for(var u,d=l[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;i.push(f.id)}}catch(t){s=!0,c=t}finally{try{a||null==d.return||d.return()}finally{if(s)throw c}}}idDim.filterFunction(function(t){return-1!=i.indexOf(t)})}),h.on("deselect",function(t,e,r,n){var o=h.cell(n);D($(o.node())),idDim.filterFunction(function(t){return!0})}),this.eventCount=dc.dataCount("#divEventCount"),this.chartValue=dc.rowChart("#divChartValue"),this.chartSeverity=dc.rowChart("#divChartSeverity"),this.chartRule=dc.rowChart("#divChartRule"),d3.select("#divChartValue a").on("click",function(){return r.chartValue.filter(null).redrawGroup()}),d3.select("#divChartSeverity a").on("click",function(){return r.chartSeverity.filter(null).redrawGroup()}),d3.select("#divChartRule a").on("click",function(){return r.chartRule.filter(null).redrawGroup()}),p=crossfilter(this.options.report),idDim=p.dimension(function(t){return t.id}),l=p.dimension(function(t){return t.value}),a=p.dimension(function(t){return t.rule.severity}),s=p.dimension(function(t){return t.event.agent}),d=p.dimension(function(t){return t.event.actor}),ruleDim=p.dimension(function(t){return"id"in t.rule?t.rule.id:r._expressionShort(t.rule.source)}),c=l.group().reduceCount(),u=a.group().reduceCount(),agentCount=s.group().reduceCount(),d.group().reduceCount(),ruleCount=ruleDim.group().reduceCount(),f=p.groupAll(),window.resetAll=function(){dc.filterAll(),dc.renderAll(),h.cells({selected:!0}).deselect()},this.eventCount.dimension(p).group(f).html({some:"<strong>%filter-count</strong> out of <strong>%total-count</strong> selected | <a href='javascript:resetAll();'>Reset All</a>",all:"<strong>%filter-count</strong> out of <strong>%total-count</strong> selected"}),this.chartValue.width(200).height(120).dimension(l).group(c).controlsUseVisibility(!0).elasticX(!0).label(function(t){return 0==t.key?"fails":1==t.key?"passes":"NA"}).title(function(t){return 0==t.key?"fails: "+t.value:1==t.key?"passes: "+t.value:"NA: "+t.value}).colors(function(t){return b(t)}).margins({top:0,right:10,bottom:30,left:5}),this.chartSeverity.width(200).height(120).dimension(a).group(u).controlsUseVisibility(!0).elasticX(!0).ordinalColors(["#3182bd"]).label(function(t){if(r.chartSeverity.hasFilter()&&!r.chartSeverity.hasFilter(t.key))return t.key+" (0%)";var e=t.key;return f.value()&&(e+=" ("+Math.floor(t.value/f.value()*100)+"%)"),e}).legend(dc.legend()).margins({top:0,right:10,bottom:30,left:5}),this.chartRule.width(400).height(450).dimension(ruleDim).group(ruleCount).controlsUseVisibility(!0).ordinalColors(["#3182bd"]).elasticX(!0).ordering(function(t){return t.key}).margins({top:0,right:50,bottom:30,left:5}),dc.renderAll(),p.onChange(function(t){"filtered"==t&&(r._updateTable(),dc.redrawAll())}),this._updateTable(),this}console.log("container not found")}else console.log("idcol not set");else console.log("report not set");else console.log("data not set");else console.log("container not set");function F(t,e,r){var n=t.append("div").attr("id",e).append("div");return n.append("strong").classed("selectorHeader",!0).text(r),n.append("a").classed("reset",!0).style("visibility","hidden").style("margin-left","5px").attr("href","#").text("reset"),n}function D(t){t.css("padding",4),t.css("border-top","1px solid #ddd"),t.css("border-right","1px solid #ddd"),t.css("border-bottom",""),t.css("border-left","")}}var r,n,O;return r=t,(n=[{key:"_expressionShort",value:function(t){return t.substr(0,160)}},{key:"_updateTable",value:function(){var t=this._setBackgroundColors();this._updateRowVisibility(t)}},{key:"_setBackgroundColors",value:function(){var t=new Set;$(h.cells().nodes()).css("background-color",""),C.clear();var r=0,n=!0,i=!1,l=void 0;try{for(var a,s=p.allFiltered()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value,u=!0,d=!1,f=void 0;try{for(var v,y=c.data.target[Symbol.iterator]();!(u=(v=y.next()).done);u=!0){var w=v.value,O=w[2],x=w[3];if("NA"===O)for(var S=0;S<m.length;S++){A(m[S],x,c,C)}else"NA"===x?console.log("Row event: not implemented yet"):A(O,x,c,C)}}catch(t){d=!0,f=t}finally{try{u||null==y.return||y.return()}finally{if(d)throw f}}}}catch(t){i=!0,l=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw l}}function A(t,e,n,o){var i=""+t+e,l=o.get(i);l||(l=o.set(i,{rowId:t,colId:e,events:[],failCnt:0}).get(i)),l.failCnt++,l.events.push(n),r=Math.max(r,l.failCnt)}g.domain([1,r]);var j=!0,k=!1,_=void 0;try{for(var P,R=C[Symbol.iterator]();!(j=(P=R.next()).done);j=!0){var F=o(P.value,2),D=F[0],T=F[1],V="#"+T.rowId,E=T.colId+":name",I=h.cell(V,E);I.node()&&(I.node().cellId=D),t.add(V);var M=!1,N=!1,B=!0,G=!1,U=void 0;try{for(var X,H=T.events[Symbol.iterator]();!(B=(X=H.next()).done);B=!0){if(e=X.value,"0"==e.value){M=!0;break}"NA"==e.value&&(N=!0)}}catch(t){G=!0,U=t}finally{try{B||null==H.return||H.return()}finally{if(G)throw U}}var Y=M?"0":N?"NA":"1",q=d3.color(b(Y));"0"==Y&&(q.opacity=g(T.failCnt)),$(I.node()).css("background-color",q.toString())}}catch(t){k=!0,_=t}finally{try{j||null==R.return||R.return()}finally{if(k)throw _}}return t}},{key:"_updateRowVisibility",value:function(t){if(w)$(h.rows().nodes()).css("display","table-row");else{$(h.rows().nodes()).css("display","none");var e=!0,r=!1,n=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var l=o.value;$(h.row(l).node()).css("display","table-row")}}catch(t){r=!0,n=t}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}}}])&&i(r.prototype,n),O&&i(r,O),t}();window.validationDashboard=O},function(t,e,r){"use strict";const n=r(2),o=Object.prototype.hasOwnProperty,i=Object.propertyIsEnumerable,l=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,s={concatArrays:!1},c=t=>{const e=[];for(const r in t)o.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(let n=0;n<r.length;n++)i.call(t,r[n])&&e.push(r[n])}return e};function u(t){return Array.isArray(t)?function(t){const e=t.slice(0,0);return c(t).forEach(r=>{l(e,r,u(t[r]))}),e}(t):n(t)?function(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return c(t).forEach(r=>{l(e,r,u(t[r]))}),e}(t):t}const d=(t,e,r,n)=>(r.forEach(r=>{r in t&&t[r]!==Object.getPrototypeOf(t)?l(t,r,p(t[r],e[r],n)):l(t,r,u(e[r]))}),t),f=(t,e,r)=>{let n=t.slice(0,0),i=0;return[t,e].forEach(e=>{const a=[];for(let r=0;r<e.length;r++)o.call(e,r)&&(a.push(String(r)),l(n,i++,e===t?e[r]:u(e[r])));n=d(n,e,c(e).filter(t=>-1===a.indexOf(t)),r)}),n};function p(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?f(t,e,r):n(e)&&n(t)?d(t,e,c(e),r):u(e)}t.exports=function(){const t=p(u(s),this!==a&&this||{},s);let e={foobar:{}};for(let r=0;r<arguments.length;r++){const o=arguments[r];if(void 0!==o){if(!n(o))throw new TypeError("`"+o+"` is not an Option Object");e=p(e,{foobar:o},t)}}return e.foobar}},function(t,e,r){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===n.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}}]);